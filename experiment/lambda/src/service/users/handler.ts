// Base imports
import { SwaggenHandler, SwaggenRequest, SwaggenResponse } from "./swaggen";

// Schema imports
import { User } from "../schema/user";

// Proxy import
import { UsersProxy } from "./proxy";

// Stub import
import { UsersStub } from "./stub";

// Type imports from proxy
import { CreateUsersResponse, ReadUsersQueryParams, ReadUsersResponse } from "./proxy";

// Auto-generated by Handler Generator
// Handler class for Users

export class UsersHandler extends SwaggenHandler {

	private proxy: UsersProxy = new UsersStub();

  public async readUsers(req: SwaggenRequest): Promise<SwaggenResponse> {
    // Proxy method signature: readUsers(query: ReadUsersQueryParams): Promise<ReadUsersResponse>;
    const query: ReadUsersQueryParams = req.getAllQueryParams() as unknown as ReadUsersQueryParams;

    const result = await this.proxy.readUsers(query);
    // TODO: Implement GET logic
    return new SwaggenResponse(200, { "Content-Type": "application/json" }, result);
  }

  public async createUsers(req: SwaggenRequest): Promise<SwaggenResponse> {
    // Proxy method signature: createUsers(data: User): Promise<CreateUsersResponse>;
    const data: User = req.body as User;

    const result = await this.proxy.createUsers(data);
    // TODO: Implement POST logic
    return new SwaggenResponse(200, { "Content-Type": "application/json" }, result);
  }

  protected getUnauthorized(): SwaggenResponse {
    return super.unauthorized("Unauthorized - Missing or invalid authentication token");
  }

  protected getForbidden(): SwaggenResponse {
    return super.forbidden("Forbidden - You do not have permission to access this resource");
  }

  protected getInternalServerError(): SwaggenResponse {
    return super.internalServerError("Internal Server Error");
  }

  protected postBadRequest(): SwaggenResponse {
    return super.badRequest("Bad Request - Invalid user data");
  }

  protected postUnauthorized(): SwaggenResponse {
    return super.unauthorized("Unauthorized - Missing or invalid authentication token");
  }

  protected postForbidden(): SwaggenResponse {
    return super.forbidden("Forbidden - You do not have permission to access this resource");
  }

  protected postInternalServerError(): SwaggenResponse {
    return super.internalServerError("Internal Server Error");
  }

}
